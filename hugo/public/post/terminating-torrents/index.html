<!DOCTYPE html>
<html><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="/build/app.css">
  
  
  <title>Marc Runkel&#39;s Blog | Terminating Torrents</title>
</head>
<body>
<div class="relative bg-white">
  <div class="flex justify-between items-center px-4 py-6 sm:px-6 md:justify-start md:space-x-10">
    <div>
      <a href="/" class="flex">
        <span class="sr-only">runkel</span>
        <img class="h-8 w-auto sm:h-10" src="/images/avatar.jpg" alt="">
      </a>
    </div>
    <div class="hidden md:flex-1 md:flex md:items-center md:justify-between">
      <div class="flex space-x-10">
      </div>
      <div class="flex items-center md:ml-12">
        <a href="/page/about" class="text-base font-medium text-gray-500 hover:text-gray-900">
          About Me
        </a>
        <a href="/resume" class="ml-8 inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-indigo-600 hover:bg-indigo-700">
          Resume
        </a>
      </div>
    </div>
  </div>
</div>
<div id="content">
<h1 class="text-3xl">Terminating Torrents</h1>
<div class="space-y-4">
  

<div class="float-right">
  <i class="fa fa-calendar"></i>
  <time datetime="2017-03-19">Mar 19, 2017</time>
  
  <i class="fa fa-tag"></i>
  
    
    <a class="btn btn-sm btn-outline-dark tag-btn" href="https://runkel.org/tags/viscosity">Viscosity</a>
    
    
    <a class="btn btn-sm btn-outline-dark tag-btn" href="https://runkel.org/tags/transmission">Transmission</a>
    
    
    <a class="btn btn-sm btn-outline-dark tag-btn" href="https://runkel.org/tags/torrents">Torrents</a>
    
    
    <a class="btn btn-sm btn-outline-dark tag-btn" href="https://runkel.org/tags/vpn">VPN</a>
    
    
    <a class="btn btn-sm btn-outline-dark tag-btn" href="https://runkel.org/tags/os/x">OS/X</a>
    
  
</div>

  <div class="">
    <p>I don&rsquo;t often Torrent, but when I do, it&rsquo;s my business and no one else&rsquo;s.</p>
<p>So, this is a quick write up for how to pause your torrents if your VPN goes down.</p>
<p>We&rsquo;ll be using:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/MacOS">MacOS</a> née OS X</li>
<li><a href="https://transmissionbt.com/">Transmission</a> - A multi-platform bittorrent client</li>
<li><a href="https://brew.sh/">Homebrew</a> The missing package manager for macOS</li>
<li>and the <a href="https://www.sparklabs.com/viscosity/">Viscosity VPN</a> client (if your VPN client can run scripts, it will work too.)</li>
</ul>
<p>First things first.  I&rsquo;m assuming you&rsquo;ve already installed transmission, if not. Go <a href="https://transmissionbt.com/">here</a> and install it.</p>
<p>Next, because the transmission developers <a href="https://trac.transmissionbt.com/ticket/5330">refuse</a> to bundle the transmission command line interface (cli) with the MacOS build, we&rsquo;ll need to install them via <a href="https://brew.sh">brew</a>.    If you don&rsquo;t have brew yet for MacOS and are coming from a *nix background, you&rsquo;ll be happy the I&rsquo;m making you install it!</p>
<p>Then install the transmission client via brew (don&rsquo;t worry, this only installs the command line utilities, not the application) by opening the terminal and running:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">brew install transmission client</code></pre></div>
<p>If necessary configure the transmission client to work with your installation.  If you didn&rsquo;t change any defaults, it should just work.  Running:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">transmission-remote -l</code></pre></div>
<p>is a good test to verify that the script is talking to transmission properly.</p>
<p>Now launch the AppleScript Editor.</p>
<ol>
<li>Click &ldquo;New Document&rdquo; in the bottom left corner of the file menu.</li>
<li>Type do shell script &ldquo;/usr/local/bin/transmission-remote -t all -s&rdquo;</li>
<li>Save the script as &ldquo;start-transmission&rdquo; somewhere that you&rsquo;ll be able to find it again.</li>
<li>Click File New</li>
<li>Type do shell script &ldquo;/usr/local/bin/transmission-remote -t all -S&rdquo;</li>
<li>Note the uppercase S</li>
<li>Save the script as &ldquo;stop-transmission&rdquo;</li>
</ol>
<p>If you&rsquo;d like, you can test the scripts by clicking the <figure class="inline-block">
    <img src="/images/play.png"
         alt="play"/> 
</figure>
 icon.   If you do this in the &ldquo;start-transmission&rdquo; script, the torrents should all start.  I wonder if you can guess what the stop-transmission script does? :)</p>
<p>Now open viscosity.</p>
<ol>
<li>Click on your VPN connection</li>
<li>Click the edit button</li>
<li>Click to the advanced tab</li>
<li>Click on the &ldquo;Connected Script&rdquo; and find the start-transmission script.</li>
<li>Click on the &ldquo;Disconnected Script&rdquo; and find the stop-transmission script.</li>
<li>Click Save</li>
</ol>
<p>That&rsquo;s it!  At this point, if you disconnect the VPN, all transmission torrents should stop.  If you start the VPN again, they should all start again.</p>
  </div>
</div>

        </div><footer class="bg-white">
  <div class="max-w-7xl mx-auto py-12 px-4 overflow-hidden sm:px-6 lg:px-8">
    <nav class="-mx-5 -my-2 flex flex-wrap justify-center" aria-label="Footer">
      <div class="px-5 py-2">
        <a href="/page/about" class="text-base text-gray-500 hover:text-gray-900">
          About
        </a>
      </div>

      <div class="px-5 py-2">
        <a href="/resume" class="text-base text-gray-500 hover:text-gray-900">
          Resume
        </a>
      </div>

      <div class="px-5 py-2">
        <a href="/categories" class="text-base text-gray-500 hover:text-gray-900">
          Categories
        </a>
      </div>

      <div class="px-5 py-2">
        <a href="/tags" class="text-base text-gray-500 hover:text-gray-900">
          Tags
        </a>
      </div>

    </nav>
    <div class="mt-8 flex justify-center space-x-6">
      <a href="https://www.instagram.com/marcrunkel/" class="text-gray-400 hover:text-gray-500">
        <span class="sr-only">Instagram</span>
        <i class="fab fa-instagram"></i>
      </a>

      <a href="https://twitter.com/mrunkel" class="text-gray-400 hover:text-gray-500">
        <span class="sr-only">Twitter</span>
        <i class="fab fa-twitter"></i>
      </a>

      <a href="https://github.com/mrunkel" class="text-gray-400 hover:text-gray-500">
        <span class="sr-only">GitHub</span>
        <i class="fab fa-github"></i>
      </a>

    </div>
    <p class="mt-8 text-center text-base text-gray-400">
      &copy; 2021 Marc Runkel. All rights reserved.
    </p>
  </div>
</footer>
</body>
</html>
